# Feature Specification: Algo-PT (Personalized Algorithm Personal Trainer)

**Feature Branch**: `001-algo-pt`
**Created**: 2026-01-12
**Status**: Draft
**Input**: PRD for AI-powered personalized algorithm learning system

## User Scenarios & Testing *(mandatory)*

### User Story 1 - Automatic Problem Solving Tracking (Priority: P1)

사용자가 백준(BOJ)에서 알고리즘 문제를 풀 때, 시스템이 자동으로 풀이 시간을 측정하고
결과를 기록한다. 사용자는 수동으로 시간을 재거나 결과를 입력할 필요가 없다.

**Why this priority**: 핵심 가치인 "Automation"의 기반이 되는 기능. 이 데이터 없이는
SM-2 복습 스케줄링, 약점 분석, AI 코치 기능 모두 불가능하다.

**Independent Test**: 브라우저 익스텐션만 설치하면 백준에서 문제를 풀고 제출했을 때
자동으로 기록이 저장되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 사용자가 백준 문제 페이지에 진입했을 때, **When** 페이지가 로드되면,
   **Then** 타이머가 자동으로 시작된다.
2. **Given** 타이머가 실행 중일 때, **When** 사용자가 다른 탭으로 이동하면,
   **Then** 타이머가 일시 정지된다.
3. **Given** 사용자가 코드를 제출했을 때, **When** "맞았습니다" 결과가 나오면,
   **Then** 소요 시간과 함께 체감 난이도(Easy/Normal/Hard) 입력 팝업이 표시된다.
4. **Given** 사용자가 코드를 제출했을 때, **When** "틀렸습니다" 결과가 나오면,
   **Then** 실패 원인 태깅 팝업이 표시된다 (알고리즘 미숙/구현 실수/시간복잡도/엣지케이스).
5. **Given** 사용자가 팝업에서 선택을 완료했을 때, **When** 확인 버튼을 누르면,
   **Then** 데이터가 서버에 저장되고 팝업이 닫힌다.

---

### User Story 2 - Smart Review Scheduling (Priority: P2)

시스템이 SM-2 알고리즘을 기반으로 사용자의 학습 기록을 분석하여, 오늘 복습해야 할
문제 리스트를 자동으로 생성한다.

**Why this priority**: 핵심 가치인 "Efficiency"를 실현하는 기능. 망각 곡선에 따른
최적의 복습 타이밍을 제공하여 학습 효율을 극대화한다.

**Independent Test**: 웹 대시보드에 접속하면 오늘 복습해야 할 문제 목록을 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 사용자가 대시보드에 접속했을 때, **When** "Today's Routine" 섹션을 보면,
   **Then** SM-2 알고리즘에 의해 계산된 복습 예정 문제 리스트가 표시된다.
2. **Given** 사용자가 문제를 정답 처리했을 때, **When** 체감 난이도를 선택하면,
   **Then** 다음 복습 날짜가 난이도에 따라 다르게 계산된다 (Easy: 더 긴 간격).
3. **Given** 사용자가 문제를 오답 처리했을 때, **When** 실패 원인을 태깅하면,
   **Then** 해당 문제의 복습 간격이 짧게 재설정된다.
4. **Given** 복습 예정일이 지난 문제가 있을 때, **When** 대시보드를 열면,
   **Then** 해당 문제들이 우선순위 높게 표시된다.

---

### User Story 3 - Weakness-Based Problem Recommendation (Priority: P3)

시스템이 사용자의 실패 원인 태그를 분석하여 약점을 파악하고, 해당 약점을 보완할 수
있는 새로운 문제를 추천한다.

**Why this priority**: 복습뿐 아니라 새로운 문제를 통한 약점 보완까지 지원하여
종합적인 학습 경험을 제공한다.

**Independent Test**: 여러 문제를 풀고 실패 원인을 태깅한 후, 대시보드에서 약점 기반
추천 문제를 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 사용자가 특정 태그(예: "시간복잡도")로 여러 번 실패했을 때,
   **When** 대시보드의 추천 섹션을 보면,
   **Then** 해당 약점과 관련된 난이도 적절한 문제들이 추천된다.
2. **Given** 추천 문제 리스트가 표시될 때, **When** 각 문제를 보면,
   **Then** 추천 이유(어떤 약점 보완용인지)가 함께 표시된다.
3. **Given** 사용자가 추천 문제를 풀어서 정답 처리했을 때, **When** 동일 태그의
   성공률이 올라가면, **Then** 해당 태그 관련 추천이 점차 줄어든다.

---

### User Story 4 - AI Hint & Code Review (Priority: P4)

사용자가 문제를 풀다가 막혔을 때 AI에게 힌트를 요청하거나, 풀이 후 코드 리뷰를
받을 수 있다. 두 가지 AI 모드(빠른 모드/고급 모드)를 선택할 수 있다.

**Why this priority**: 핵심 가치인 "Dual AI Mode"를 실현하는 기능. P1-P3가 데이터
수집과 분석 기반이라면, P4는 그 위에서 작동하는 AI 코칭 기능이다.

**Independent Test**: 웹 대시보드에서 문제를 선택하고 AI에게 힌트 또는 코드 리뷰를
요청할 수 있다.

**Acceptance Scenarios**:

1. **Given** 사용자가 AI 코치 센터에 접속했을 때, **When** 모드 토글을 보면,
   **Then** "빠른 모드"와 "고급 모드" 중 선택할 수 있다.
2. **Given** 사용자가 "힌트 요청"을 했을 때, **When** AI가 응답하면,
   **Then** 정답 코드 없이 접근 방향만 제시하는 힌트가 표시된다.
3. **Given** 사용자가 코드와 함께 "리뷰 요청"을 했을 때, **When** AI가 응답하면,
   **Then** 코드의 비효율적인 부분과 개선 방안이 표시된다.
4. **Given** "빠른 모드"가 선택되었을 때, **When** 요청을 보내면,
   **Then** 빠른 응답이 오지만 간단한 분석만 제공된다.
5. **Given** "고급 모드"가 선택되었을 때, **When** 요청을 보내면,
   **Then** 더 깊이 있는 분석과 상세한 피드백이 제공된다.

---

### User Story 5 - External Data Sync (Priority: P5)

사용자가 익스텐션 없이 풀었거나 누락된 데이터를 Solved.ac에서 가져와 동기화할 수 있다.

**Why this priority**: 데이터 완결성을 보장하는 보조 기능. 익스텐션을 깜빡하고
설치하지 않은 상태에서 푼 문제도 기록에 반영할 수 있다.

**Independent Test**: 웹 대시보드에서 "동기화" 버튼을 누르면 Solved.ac의 최근
풀이 기록이 시스템에 반영되는지 확인할 수 있다.

**Acceptance Scenarios**:

1. **Given** 사용자가 대시보드에서 "Sync" 버튼을 클릭했을 때, **When** 동기화가
   완료되면, **Then** Solved.ac의 최근 풀이 기록이 시스템에 추가된다.
2. **Given** 동기화로 가져온 문제가 이미 시스템에 존재할 때, **When** 중복이
   감지되면, **Then** 기존 기록이 유지되고 중복 추가되지 않는다.
3. **Given** 동기화로 새 문제가 추가될 때, **When** 저장되면, **Then** 체감 난이도는
   "Normal"로, 실패 원인은 null로 기본 설정된다.

---

### Edge Cases

- 사용자가 문제 페이지에서 새로고침하면 타이머가 어떻게 되는가?
  - 타이머는 세션 스토리지에 저장되어 새로고침 시에도 유지된다.
- 네트워크 오류로 데이터 전송이 실패하면 어떻게 되는가?
  - 로컬에 임시 저장 후 네트워크 복구 시 자동 재전송한다.
- 사용자가 팝업에서 선택하지 않고 닫으면 어떻게 되는가?
  - 데이터는 저장되지만 체감 난이도/실패 원인은 null로 저장된다.
- Solved.ac 계정이 없거나 연동되지 않은 경우는?
  - 동기화 기능만 비활성화되고 나머지 기능은 정상 작동한다.
- AI 요청 중 API 할당량 초과 시 어떻게 되는가?
  - 사용자에게 알림을 표시하고 잠시 후 재시도를 안내한다.

## Requirements *(mandatory)*

### Functional Requirements

**데이터 수집 (Browser Extension)**

- **FR-001**: 시스템은 백준 문제 페이지 진입 시 자동으로 타이머를 시작해야 한다.
- **FR-002**: 시스템은 탭 비활성화 시 타이머를 일시 정지해야 한다.
- **FR-022**: 시스템은 한 번에 하나의 문제만 추적해야 한다 (새 문제 열면 이전 타이머 정지/저장).
- **FR-003**: 시스템은 제출 결과(정답/오답)를 자동으로 감지해야 한다.
- **FR-004**: 시스템은 정답 시 체감 난이도 입력 UI를 표시해야 한다.
- **FR-005**: 시스템은 오답 시 실패 원인 태깅 UI를 표시해야 한다.
- **FR-006**: 시스템은 수집된 데이터를 서버에 자동 전송해야 한다.

**학습 스케줄링 (Web Dashboard)**

- **FR-007**: 시스템은 SM-2 알고리즘을 사용하여 복습 일정을 계산해야 한다.
- **FR-008**: 시스템은 오늘 복습해야 할 문제 리스트를 표시해야 한다.
- **FR-009**: 시스템은 체감 난이도에 따라 복습 간격을 조정해야 한다.
- **FR-010**: 시스템은 실패한 문제의 복습 간격을 단축해야 한다.

**약점 분석 및 추천**

- **FR-011**: 시스템은 실패 원인 태그를 집계하여 약점을 분석해야 한다.
- **FR-012**: 시스템은 약점 기반으로 적절한 난이도의 문제를 추천해야 한다.
- **FR-013**: 시스템은 추천 문제에 추천 이유를 표시해야 한다.

**AI 코칭**

- **FR-014**: 시스템은 두 가지 AI 모드(빠른/고급)를 제공해야 한다.
- **FR-015**: 시스템은 정답을 직접 알려주지 않는 힌트 기능을 제공해야 한다.
- **FR-016**: 시스템은 제출된 코드의 비효율성을 분석하는 리뷰 기능을 제공해야 한다.
- **FR-021**: 시스템은 AI 요청을 일일 제한해야 한다 (빠른 모드 50회, 고급 모드 10회).

**외부 연동**

- **FR-017**: 시스템은 Solved.ac에서 풀이 기록을 가져와 동기화할 수 있어야 한다.
- **FR-018**: 시스템은 중복 데이터를 자동으로 감지하고 처리해야 한다.

**인증 및 사용자 관리**

- **FR-019**: 시스템은 사용자 인증 기능을 제공해야 한다.
- **FR-020**: 사용자는 백준 ID와 목표 티어를 설정할 수 있어야 한다.

### Key Entities

- **User**: 시스템 사용자. 백준 ID, 목표 티어 등의 프로필 정보를 가짐.
- **Problem**: 알고리즘 문제. 문제 번호, 제목, 알고리즘 태그, 난이도 등의 메타데이터를 가짐.
  메타데이터는 Solved.ac API에서 가져옴.
- **StudyLog**: 학습 기록. 어떤 사용자가 어떤 문제를 언제, 얼마나 걸려서, 어떤 결과로
  풀었는지의 정보. 체감 난이도, 실패 원인, 다음 복습 예정일 포함. 전체 기록 영구 보존.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 문제 풀이 후 5초 이내에 결과 입력 팝업이 표시된다.
- **SC-002**: 타이머 측정 오차가 실제 풀이 시간 대비 1% 미만이다.
- **SC-003**: 복습 스케줄을 따른 사용자의 재풀이 정답률이 80% 이상이다.
- **SC-004**: 약점 기반 추천 문제의 사용자 풀이 시도율이 50% 이상이다.
- **SC-005**: AI 힌트 요청 시 3초 이내에 응답이 시작된다 (빠른 모드 기준).
- **SC-006**: AI 힌트가 정답 코드를 포함하지 않는 비율이 100%이다.
- **SC-007**: Solved.ac 동기화 시 누락 데이터 복구율이 95% 이상이다.
- **SC-008**: 시스템이 동시 사용자 100명을 지원할 수 있다.

## Clarifications

### Session 2026-01-12

- Q: 브라우저 익스텐션의 인증 방식은? → A: 웹 대시보드 로그인 후 익스텐션이 토큰 공유
- Q: 학습 데이터(StudyLog) 보존 기간은? → A: 전체 기록 영구 보존
- Q: AI 요청 제한 정책은? → A: 일일 요청 제한 (빠른 모드 50회, 고급 모드 10회)
- Q: 문제 메타데이터(난이도, 태그 등) 소스는? → A: Solved.ac API
- Q: 동시 다중 탭 문제 풀이 처리 방식은? → A: 한 번에 하나만 추적 (새 문제 열면 이전 타이머 정지/저장)

## Assumptions

- 사용자는 Chrome 브라우저를 사용한다 (익스텐션 지원).
- 사용자는 백준(acmicpc.net) 계정을 보유하고 있다.
- Solved.ac 연동은 선택적이며, 없어도 핵심 기능은 작동한다.
- AI 기능 사용 시 외부 AI 서비스 비용이 발생할 수 있다.
- 인증 방식은 이메일/비밀번호 기반을 기본으로 한다.
- 브라우저 익스텐션은 웹 대시보드 로그인 후 발급된 인증 토큰을 공유받아 사용한다.
